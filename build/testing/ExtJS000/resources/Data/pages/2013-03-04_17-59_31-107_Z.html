<h1>Introduction</h1>
<p>In this lab, you will code the high-level user interface.</p>

<h1>Objectives</h1>

<ul class="plain">
<li>Review requirements for an initial user interface</li>
<li>Move supporting files into an initial application</li>
<li>Define initial view components</li>
<li>Use aliases to add view components to a viewport class</li>
<li>Convert a view component to a tab panel class</li>
<li>Use aliases to add view components to a tab panel class</li>
<li>Add an image to a view component</li>
</ul>

<h1>Steps</h1>
<ol>

	<li>Review the component nesting with your instructor

		<p>Look at the user's sketch and discuss the key pieces of the 
user interface.</p>

<a href="resources/images/_yelpExtplorer/AppUserSketch.png" target="lab"><img src="resources/images/_yelpExtplorer/AppUserSketch.png" width="50%"/></a>

<table>
<tr>
<td style="width: 200px;">
<p><b>Viewport<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue">West filter panel</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue">North title</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue">East detail panel</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;Center tab panel<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Map panel</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue">Grid</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue">Data view</span><br/>
</b></p>
</td>
<td>
        <p>The pieces you will code this week are highlighted in blue. The viewport and center tab panel were automatically generated by Sencha Cmd.</p>
</td>
</tr></table>


	</li>

	<li>Get a few supporting files

		<p>We have provided some images, the source code for the Map and
			the categories data seen in the filter panel. You need to copy and paste them into your application.</p>

		
		<p>
			You will copy them <b>from</b>
			<kbd>SenchaTraining/ExtJS251/Labs/YelpExtplorerSupportingFiles/</kbd>. You will copy <b>to</b> the corresponding location in your newly generated <kbd>.../YelpExtplorer</kbd> folder.
		</p>
		<p>Copy three things: the file <kbd>app/view/Map.js</kbd>, the folder <kbd>data/</kbd> and the folder <kbd>resources/images/</kbd></p>

		<img src="resources/images/_yelpExtplorer/Supporting.png" />
        
    </li>

		
	<li>Use Sencha Cmd to create the view components
		<p>A quick way to create the initial view components is with
			Sencha Cmd. We will name our new views:
		<ul>
			<li>Filter</li>
			<li>Title</li>
			<li>Grid</li>
			<li>View</li>
			<li>detail.Detail</li>
		</ul>

		<p>
			<small><b>Note: </b>Detail is in its own package. That is
				because, eventually we will add the edit window to that package.</small> 
		</p>
		<p>In your terminal window, navigate to <kbd>Labs/YelpExtplorer</kbd> and
			enter</p> 

<pre>sencha generate view Filter</pre>
<p>Important: the <code>generate</code> command <b>must</b> be done from the application's root folder.</p>
            
		<p>Once you run this, Cmd creates a new file named <kbd>view/Filter.js</kbd>.</p>
            
		<p>Repeat this with the other four names. (Try pressing up
            arrow in your terminal window to see the previous command. That way
            you will only have to change the class name each time.) Remember to use
			"detail.Detail" for the name of the detail panel. </p>

<div type="expander" caption="TIP: generate all views at once">
<p>It's possible to generate all views at once by combining commands in Sencha Cmd
with the <code>and</code> operator:
</p>
<pre>
sencha generate view Filter and view Title and view Grid and view View and view detail.Detail
</pre>
</div>

		<p>At the end of this step you will have generated the five
			JavaScript source files named for each of the view class names you
			passed to Sencha Cmd. Each source file contains one class definition.</p>
	</li>
</li>

	<li>Edit each new class to define an alias

		<p>
			For each of the five files &mdash; <kbd>view/Filter.js</kbd>, <kbd>view/Title.js</kbd>, etc.
			&mdash; edit the file contents and add <code>xtype</code> and <code>html</code> properties.
			(We are <i>not</i> editing Viewport.js yet.)
		</p>

		<p>Modify each class like this example:</p> <pre>
Ext.define("YelpExtplorer.view.Filter", {
    extend: 'Ext.Component',
    <span style="background-color: yellow">xtype: 'yepfilter',</span>
    <span style="background-color: yellow">html: 'Filter'</span>
});
</pre>

		<p>For each class, set the xtype to be "yep" followed by the name
			of the class, all lower-case.</p>
		<p>Set the <code>html</code> property to the class name &mdash; this is in
			order to uniquely identify the component as it's being rendered.
			Later on, when you fully implement each of these key components,
			you will get rid of the html property. You're just using it here so you
			can see which component is being rendered as you test your user
			interface.</p>
	</li>

<li>Modify <kbd>Main.js</kbd> to make it a tab panel
<p>Use this code to make the main panel a tab panel that will hold the map, grid and dataview:</p>
<pre>Ext.define('YelpExtplorer.view.Main', {
    extend: 'Ext.tab.Panel',
    xtype: 'app-main',

    items: [{
            title: 'Map'
        }, {
            title: 'Grid'
        }, {
            title: 'View'
        }
    ]

});</li>

	<li>Use your new west component
		<p>Now that the view classes exist and have aliases, we can use
			them in the viewport.</p>

		<p>We need to change the viewport to show the four key
		containers in our application: the filter at the west, the title at the north, the edit panel at the east and the tab panel in the center.</p>
		
		<p>Open <kbd>Viewport.js</kbd> and change its layout to <code>type:'border'</code>. Change <kbd>Ext.layout.container.Fit</kbd> to <kbd>Ext.layout.container.Border</kbd> in the requires Array to reflect the new layout.</p>



<p>Add a config for the west filter to the items array, specifying:</p>
		<ul class="plain">
			<li><code>xtype:'yepfilter'</code></li>
			<li><code>region:'west'</code></li>
			<li><code>title:'Filter'</code></li>
			<li><code>width:188</code></li>
		</ul>
</p>
<p>Add a <code>region:'center'</code> to the main panel's config.</p>

		<p>
			You also need to add a <code>requires</code> array entry for the filter class. If you
			recall, <code>requires</code> is needed because otherwise Ext JS won't know what
			the filter xtype aliases refers to. </br> Here are the changes, highlighted:
		<pre>
Ext.define('YelpExtplorer.view.Viewport', {
    extend: 'Ext.container.Viewport',
    requires:[
        <span style="background-color: yellow;">'Ext.layout.container.Border',</span>
        'YelpExtplorer.view.Main'<span style="background-color: yellow;">,</span>
         <span style="background-color: yellow;">'YelpExtplorer.view.Filter'</span>
    ],

    layout: {
        type: 'border'
    },

     items: [<span style="background-color: yellow;">{</span>
        <span style="background-color: yellow;">xtype: 'yepfilter',</span>
        <span style="background-color: yellow;">region: 'west',</span>
        <span style="background-color: yellow;">title: 'Filter',</span>
        <span style="background-color: yellow;">width: 188</span>
    <span style="background-color: yellow;">},</span>{
        xtype: 'app-main'<span style="background-color: yellow;">,
        region: 'center'</span>
    }]
}); </pre>

</li>

		<p>Once you've made those changes for the west panel, refresh your
			browser. You should see your new panel being used. Note that the
			<code>title</code> on the west component doesn't have any effect yet. Later,
			when we fully implement the west component as a panel, we will see the
			title in the panel's header.</p>
	</li>

	<li>Do the same for the north and east panels

		<p>So far, the viewport items array has only two items in it: our
			filter component on the west, and the tab panel in the center</p>

		<p>To use your new title and detail components you need to add
			those components to the north and east.</p>
		<p>
			For the north component add a new config to the items array,
			specifying <code>region:'north'</code> and <code>xtype:'yeptitle'</code>. 
			Set the height to <b>36</b>.
		</p>
		<p>For the east component add another new config to the items array,
			specifying <code>region:'east'</code> and <code>xtype:'yepdetail'</code>. 
			Set the width to <b>128</b>.</p>

		<p>
			You also need to specify the two classes in the
			<code>requires</code>
			array: 'YelpExtplorer.view.Title' and
			'YelpExtplorer.view.detail.Detail'.
		</p>


		<p>After you make these changes, refresh your browser. You should
			see your filter, title and detail components.</p>

	</li>

	<li>Edit the tab panel to use our map, grid and view classes

		<p>Edit <kbd>Main.js</kbd> and modify the items array to add the map, grid and view classes <code>xtype:'yepmap'</code>, <code>xtype:'yepgrid'</code>, <code>xtype:'yepview'</code>. </p>
<p>You also need to add a requires array, naming the classes used in the tab panel:</p>
<pre>
requires: ['YelpExtplorer.view.Map', 'YelpExtplorer.view.Grid', 'YelpExtplorer.view.View']
</pre>
			
		<p>When you're finished, refresh your browser. You should see your
			west, north and east panels. And you should see the tab panel, with
			three tabs.</p>
<p>The map was given to us and is fully implemented. Under the Map tab you should see "Please select a school and category." The other tabs hold our stubbed out grid and view classes. They have their <code>html</code> properties set to their class names, so under the Grid tab you should see "Grid" and under View you should see "View".
</p>
	</li>

	<li>Add an image to the north component
		<p>Let's do one last thing and add the Yelp Extplorer icon image
			to the north component. To do that, edit "view/Title.js" and do three
			things:</p>
		<p>
			First, replace the <code>html</code> property value with the string <br />
			<code>&lt;img src="resources/images/YelpExtplorerLogo.png" /&gt;</code>
		</p>
		<p>Finally, add a <code>height</code> property set to 36. By setting the
			height here, you can now remove it from the north component specification
			in <kbd>Viewport.js</kbd>.</p>
			
		<p>Save, and refresh your browser. You should see the YelpExtplorer image at the top.</p>
			
	</li>
</ol>

<h1>Conclusion</h1>
<p>You have stubbed out classes for all of the key user interface
	components. Soon we will be adding model and store classes, then
	implement the grid, dataview, and other components.</p>
</li>