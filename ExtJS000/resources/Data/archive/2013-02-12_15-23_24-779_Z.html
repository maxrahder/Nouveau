<h1>Introduction</h1>
<p>In this lab, you will code the high-level user interface.
<ol>

	<li>Review the component nesting with your instructor

		<p>Look at the user's sketch and discuss the key pieces of the 
user interface.</p>

<a href="resources/images/_yelpExtplorer/AppUserSketch.png" target="lab"><img src="resources/images/_yelpExtplorer/AppUserSketch.png" width="50%"/></a>

<table>
<tr>
<td style="width: 200px;">
<p><b>Viewport<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue">West filter panel</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue">North title</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue">East detail panel</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;Center tab panel<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Map panel</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue">Grid</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue">Data view</span><br/>
</b></p>
</td>
<td>
        <p>The pieces you will code this week are highlighted in blue. The viewport and center tab panel were automatically generated by Sencha Cmd.</p>
</td>
</tr></table>


	</li>

	<li>Get a few supporting files

		<p>We have provided some images, the source code for the Map and
			the categories data seen in the filter panel. You need to copy and paste them into your application.</p>

		
		<p>
			You will copy them <b>from</b>
			<tt>SenchaTraining/ExtJS251/Labs/YelpExtplorerSupportingFiles/</tt>. You will copy <b>to</b> the corresponding location in your newly generated <tt>.../YelpExtplorer</tt> folder.
		</p>
		<p>Copy three things: the file <tt>app/view/Map.js</tt>, the folder <tt>data/</tt> and the folder <tt>resources/images/</tt></p>

		<img src="resources/images/_yelpExtplorer/Supporting.png" />
        
    </li>

		
	<li>Use Sencha Cmd to create the view components
		<p>A quick way to create the initial view components is with
			Sencha Cmd. We will name our new views:
		<ul>
			<li>Filter</li>
			<li>Title</li>
			<li>Grid</li>
			<li>View</li>
			<li>detail.Detail</li>
		</ul>

		<p>
			<small><b>Note: </b>Detail is in its own package. That is
				because, eventually we'll add the edit window to that package.</small>
		</p>
		<p>In your terminal window, navigate to <tt>Labs/YelpExtplorer</tt> and
			enter</p> <pre>sencha generate view Filter</pre>
            
		<p>Once you run this, you should see a new file, <tt>view/Filter.js</tt> in your project.</p>
            
		<p>Repeat this with the other five names. (Try pressing up
            arrow in your terminal window to see the previous command. That way
            you will only have to change the class name each time.) Remember to use
			"detail.Detail" for the name of the detail panel. </p>

		<p>At the end of this step you will have generated the six
			JavaScript source files named for each of the view class names you
			passed to Sencha Cmd. Each source file contains one class definition.</p>
	</li>

<li>Sencha Cmd fun facts

<p>Please bear in mind that after creating your application, Sencna Cmd commands to generate models, view and controllers <b>must</b> be done from the root of your application directory. </p>

<p>Also note that some IDEs may not immediately "see" the generated files. In Eclipse and Aptana, you may not see the new files until you manually refresh the project contents.</p>
</li>



	<li>Edit each new class to define an alias

		<p>
			For each of the six files &mdash; <tt>view/Filter.js</tt>, <tt>view/Title.js</tt>, etc.
			&mdash; edit the file contents and add <code>xtype</code> and <code>html</code> properties.
			(We are <i>not</i> editing Viewport.js yet.)
		</p>

		<p>Modify each class like this example:</p> <pre>
Ext.define("YelpExtplorer.view.Filter", {
    extend: 'Ext.Component',
    <span style="background-color: yellow">xtype: 'yepfilter',</span>
    <span style="background-color: yellow">html: 'Filter'</span>
});
</pre>

		<p>For each class, set the xtype to be "yep" followed by the name
			of the class, all lower-case.</p>
		<p>Set the <code>html</code> property to the class name &mdash; this is in
			order to uniquely identify the component as it's being rendered.
			Later on, when you fully implement each of these key components,
			you will get rid of the html property. You're just using it here so you
			can see which component is being rendered as you test your user
			interface.</p>
	</li>

	<li>Use your new west component
		<p>Now that the view classes exist and have aliases, we can use
			them in the viewport.</p>
		<p>Open <tt>Viewport.js</tt> and modify the west component config:</p>
		<ul class="plain">
			<li>Change the <code>xtype</code> to "yepfilter"</li>
			<li>Change the <code>title</code> to "Filter"</li>
			<li>Set the <code>width</code> to 188</li>
		</ul>
		<p>
			You also need to add a <code>requires</code> array for the viewport class. If you
			recall, <code>requires</code> is needed because otherwise Ext JS won't know what
			the xtype aliases refers to. </br> Here are those changes, highlighted:
		<pre>
Ext.define('YelpExtplorer.view.Viewport', {
    renderTo: Ext.getBody(),
    extend: 'Ext.container.Viewport',
    requires:[
        'Ext.tab.Panel',
        'Ext.layout.container.Border'<span
				style="background-color: yellow;">,</span>
        <span style="background-color: yellow;">'YelpExtplorer.view.Filter'</span>
    ],

    layout: {
        type: 'border'
    },

    items: [{
        region: 'west',
        xtype: '<span style="background-color: yellow;">yepfilter</span>',
        title: '<span style="background-color: yellow;">Filter</span>',
        width: <span style="background-color: yellow;">188</span>
    },{
        region: 'center',
        xtype: 'tabpanel',
        items:[{
            title: 'Center Tab 1'
        }]
    }]
});</pre>
		<p>Once you've made those changes for the west panel, refresh your
			browser. You should see your new panel being used. Note that the
			<code>title</code> on the west component doesn't have any effect yet. Later,
			when we fully implement the west component as a panel, we'll see the
			title in the panel's header.</p>
	</li>

	<li>Do the same for the north and east panels

		<p>So far, the viewport items array has only two items in it: our
			filter component on the west, and the original tab panel in the
			center.</p>

		<p>To use your new title and detail components you need to add
			those components to the north and east.</p>
		<p>
			For the north component add a new config to the items array,
			specifying <code>region:'north'</code> and <code>xtype:'yeptitle'</code>. 
			Set the height to <b>36</b>.
		</p>
		<p>For the east component add another new config to the items array,
			specifying <code>region:'east'</code> and <code>xtype:'yepdetail'</code>. 
			Set the width to <b>128</b>.</p>

		<p>
			You also need to specify the two classes in the
			<code>requires</code>
			array: "YelpExtplorer.view.Title" and
			"YelpExtplorer.view.detail.Detail".
		</p>


		<p>After you make these changes, refresh your browser. You should
			see your filter, title and detail components.</p>

	</li>

	<li>Separate the tab panel too

		<p>The next thing we will do is to separate the tab panel into its
			own class.</p>

		<p>When you generated the application, Sencha Cmd created a file
			called <tt>Main.js</tt>. We'll use that to define the tab panel.</p>

		<p>Edit <tt>Main.js</tt> and change the code so it extends
			<code>Ext.tab.Panel</code>. Give it the xtype alias "yepmain". Then, add an
			<code>items</code> array, specifying the <b>map</b>, <b>grid</b> and <b>view</b> components. 
			For each item in the items array you will only have a <code>title</code> and           
                        <code>xtype</code>property. Set the title to the name of the view class.
                         Remove the old <code>html</code> property.
			</p><p>Since you're referencing everything by xtype, you will need to 
			specify each class name in a <code>requires</code> array.</p>

		<p>Finally, go back to <tt>Viewport.js</tt> and change the center panel
			to use the "yepmain" xtype, and remove the <code>items</code> array (that contains
			the "Center Tab 1" panel). The viewport will now need a reference to <code>YelpExtplorer.view.Main</code>
			in its <code>requires</code> array.</p>
			
		<p>When you're finished, refresh your browser. You should see your
			west, north and east panels. And you should see the tab panel, with
			three tabs. The first tab is the map, which defaults to showing
			"Please select a school and category." For now, the other components
			simply use their <code>html</code> properties to show content.</p>
	</li>

	<li>Add an image to the north component
		<p>Let's do one last thing and add the Yelp Extplorer icon image
			to the north component. To do that, edit "view/Title.js" and do three
			things:</p>
		<p>
			First, replace the <code>html</code> property value with the string <br />
			<code>&lt;img src="resources/images/YelpExtplorerLogo.png" /&gt;</code>
		</p>
		<p>Finally, add a <code>height</code> property set to 36. By setting the
			height here, you can now remove it from the north component specification
			in <tt>Viewport.js</tt>.</p>
			
		<p>Save, and refresh your browser. You should see the YelpExtplorer image at the top.</p>
			
	</li>
</ol>

<h1>Conclusion</h1>
<p>You have stubbed out classes for all of the key user interface
	components. Soon we'll be adding model and store classes, then
	implement the grid, dataview, and other components.</p>
</li>